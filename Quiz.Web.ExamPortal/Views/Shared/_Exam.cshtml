@model List<Quiz.Web.DTO.Models.Questions>
@{
    ViewBag.Title = "StartExam";
    int nxtSkip = Convert.ToInt32(ViewBag.Skip) + 1;
    int prevSkip = Convert.ToInt32(ViewBag.Skip) == 0 ? Convert.ToInt32(ViewBag.Skip) : Convert.ToInt32(ViewBag.Skip) - 1;
    int nxtTake = Convert.ToInt32(ViewBag.Take) + 1;
    int prevTake = Convert.ToInt32(ViewBag.Take) == 1 ? Convert.ToInt32(ViewBag.Take) : Convert.ToInt32(ViewBag.Take) - 1;
    Guid QuestionId = Model.FirstOrDefault().ID;

}

<h2>Showing Question @ViewBag.Take of  @ViewBag.Questions</h2>
<div id="questions">
</div>
@foreach (var items in Model)
{
    if (!String.IsNullOrEmpty(items.MasterQuestion))
    {
        <h2>@items.MasterQuestion</h2>
    }

    if (!String.IsNullOrEmpty(items.Question))
    {
        <h2>@items.Question</h2>
    }

    if (!String.IsNullOrEmpty(items.OptionA))
    {
        <label>
            <input type="radio" name="@items.ID" value="A">
            <span>@items.OptionA</span>
        </label>
    }
    if (!String.IsNullOrEmpty(items.OptionB))
    {
        <label>
            <input type="radio" name="@items.ID" value="B">
            <span>
                @items.OptionB
            </span>
        </label>
    }
    if (!String.IsNullOrEmpty(items.OptionC))
    {
        <label>
            <input type="radio" name="@items.ID" value="C">
            <span>
                @items.OptionC
            </span>
        </label>
    }
    if (!String.IsNullOrEmpty(items.OptionD))
    {
        <label>
            <input type="radio" name="@items.ID" value="D">
            <span>
                @items.OptionD
            </span>
        </label>
    }
    if (!String.IsNullOrEmpty(items.OptionE))
    {
        <label>
            <input type="radio" name="@items.ID" value="E">
            <span>
                @items.OptionE
            </span>
            </label>
                }


                }
<div class="clearfix btn-center">
                @if (ViewBag.Take > 1)
                {
                    <button class="btn btn-secondary btn-gray" type="button" value="Previous" onclick="GetQuestion('@prevSkip','@prevTake')">Previous</button>
                }
                <button class="btn btn-primary btn-blue" type="button" value="Submit" onclick="SaveExamAnswer('@Model.FirstOrDefault().MasterQuestionId') ">Submit Answer </button>

                @if (ViewBag.Questions != ViewBag.Take)
                {
                    <button class="btn btn-secondary btn-gray" type="button" value="Next" onclick="GetQuestion('@nxtSkip','@nxtTake')">Next</button>
                }
    </div>
                <script>

    function SaveExamAnswer(quesID) {

        var questionId = '@QuestionId';
        var answer = $("input[name='" + questionId + "']:checked").val();
        debugger;
        var status = "FAILED";
        if (answer) {

            $.ajax({
                url: '@Url.Action("SaveExamAnswer", "ExamLogin")?quesID=' + questionId + '&answer=' + answer,
                type: "POST",
                async: false,
                contentType: "application/json",
                dataType: "HTML",
                success: function (result) {
                    GetQuestion('@nxtSkip', '@nxtTake');
                },

                error: function (status) {
                },
                cache: false,
                async: false
            });

        }
        return status;
    }
    function copyToClipboard() {

        var aux = document.createElement("input");
        aux.setAttribute("value", "print screen disabled!");
        document.body.appendChild(aux);
        aux.select();
        document.execCommand("copy");
        // Remove it from the body
        document.body.removeChild(aux);
        //setTimeout(function () {
        //    alert("Print screen disabled!");
        //},1000)
       
    }

    $(window).keyup(function (e) {
        if (e.keyCode == 44) {
            copyToClipboard();
        }
    });
</script>



